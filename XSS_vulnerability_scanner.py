import requests
from pprint import pprint
from bs4 import BeautifulSoup as bs
from urllib.parse import urljoin


def get_all_forms(url):
    """ given a 'url' it returns all forms from the HTML content"""
    soup = bs(requests.get(url).content)
    return soup.find_all("form")

def get_form_details(form):
    """this function extracts all possible useful information about an HTML 'form'"""
    details = {}
    #get the form action (target url)
    action = form.attrs.get("action").lower()
    #get the form method (POST,GET e.t.c)
    method = form.attrs.get("method","get").lower()
    #get all the input details such as type and name e.t.c
    inputs = []
    for input_tag in form.find_all("input"):
        input_type = input_tag.attrs.get("type","text")
        input_name = input_tag.attrs.get("name")
        inputs.append({"type":input_type ,"name":input_name })
    # put everything to the resulting dictionary
    details["action"]=action
    details["method"]=method
    details["inputs"]=inputs
    return details

